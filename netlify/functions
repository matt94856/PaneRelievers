const axios = require("axios");

exports.handler = async (event) => {
    const { token } = JSON.parse(event.body);
    const secretKey = "YOUR_SECRET_KEY";  // Replace with your reCAPTCHA secret key
    
    const response = await axios.post(`https://www.google.com/recaptcha/api/siteverify`, null, {
        params: {
            secret: secretKey,
            response: token,
        },
    });

    if (response.data.success) {
        return {
            statusCode: 200,
            body: JSON.stringify({ message: "Verification passed!" }),
        };
    } else {
        return {
            statusCode: 400,
            body: JSON.stringify({ message: "Verification failed." }),
        };
    }
};

